<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 6.2.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"qifeng1994.github.io","root":"/","scheme":"Gemini","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta name="description" content="我的第一个游戏开发日志2022&#x2F;04&#x2F;04制作第一个关卡：一个房间，包括一个落地窗，床，桌子，卫生间，门，如果可以的话加上一个窗帘 首先复习一下LightingShadow这个快速指南。然后用BSP Brash绘制房间的边界，再加入家具(需要参考油管bsp to mesh的视频) 2022&#x2F;04&#x2F;06重新建了一个level1，这次直接用mesh来搭房子，门框">
<meta property="og:type" content="article">
<meta property="og:title" content="unreal dev">
<meta property="og:url" content="https://qifeng1994.github.io/2022/06/07/unreal-dev/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:description" content="我的第一个游戏开发日志2022&#x2F;04&#x2F;04制作第一个关卡：一个房间，包括一个落地窗，床，桌子，卫生间，门，如果可以的话加上一个窗帘 首先复习一下LightingShadow这个快速指南。然后用BSP Brash绘制房间的边界，再加入家具(需要参考油管bsp to mesh的视频) 2022&#x2F;04&#x2F;06重新建了一个level1，这次直接用mesh来搭房子，门框">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://qifeng1994.github.io/2022/06/07/unreal-dev/devlog001.PNG">
<meta property="og:image" content="https://qifeng1994.github.io/2022/06/07/unreal-dev/devlog002.PNG">
<meta property="og:image" content="https://qifeng1994.github.io/2022/06/07/unreal-dev/devlog003.PNG">
<meta property="og:image" content="https://qifeng1994.github.io/2022/06/07/unreal-dev/devlog004.PNG">
<meta property="og:image" content="https://qifeng1994.github.io/2022/06/07/unreal-dev/devlog005.PNG">
<meta property="og:image" content="https://qifeng1994.github.io/2022/06/07/unreal-dev/devlog006.PNG">
<meta property="og:image" content="https://qifeng1994.github.io/2022/06/07/unreal-dev/devlog007.PNG">
<meta property="og:image" content="https://qifeng1994.github.io/2022/06/07/unreal-dev/devlog008.PNG">
<meta property="og:image" content="https://qifeng1994.github.io/2022/06/07/unreal-dev/devlog009.PNG">
<meta property="og:image" content="https://qifeng1994.github.io/2022/06/07/unreal-dev/devlog010.PNG">
<meta property="og:image" content="https://qifeng1994.github.io/2022/06/07/unreal-dev/Camera002.PNG">
<meta property="og:image" content="https://qifeng1994.github.io/2022/06/07/unreal-dev/Camera001.PNG">
<meta property="og:image" content="https://qifeng1994.github.io/2022/06/07/unreal-dev/FirstPersonCamera001.PNG">
<meta property="og:image" content="https://qifeng1994.github.io/2022/06/07/unreal-dev/FirstPersonCamera002.PNG">
<meta property="og:image" content="https://qifeng1994.github.io/2022/06/07/unreal-dev/ThirdPersonCamera001.PNG">
<meta property="og:image" content="https://qifeng1994.github.io/2022/06/07/unreal-dev/ThirdPersonCamera002.PNG">
<meta property="og:image" content="https://qifeng1994.github.io/2022/06/07/unreal-dev/ThirdPersonCamera004.PNG">
<meta property="og:image" content="https://qifeng1994.github.io/2022/06/07/unreal-dev/ThirdPersonCamera005.PNG">
<meta property="og:image" content="https://qifeng1994.github.io/2022/06/07/unreal-dev/ThirdPersonCamera003.PNG">
<meta property="og:image" content="https://qifeng1994.github.io/2022/06/07/unreal-dev/XYZ001.PNG">
<meta property="og:image" content="https://qifeng1994.github.io/2022/06/07/unreal-dev/XYZ002.PNG">
<meta property="og:image" content="https://qifeng1994.github.io/2022/06/07/unreal-dev/XYZ003.PNG">
<meta property="og:image" content="https://qifeng1994.github.io/2022/06/07/unreal-dev/XYZ004.PNG">
<meta property="og:image" content="https://qifeng1994.github.io/2022/06/07/unreal-dev/Migrate001.PNG">
<meta property="og:image" content="https://qifeng1994.github.io/2022/06/07/unreal-dev/Migrate002.PNG">
<meta property="og:image" content="https://qifeng1994.github.io/2022/06/07/unreal-dev/Migrate003.PNG">
<meta property="og:image" content="https://qifeng1994.github.io/2022/06/07/unreal-dev/Migrate004.PNG">
<meta property="og:image" content="https://qifeng1994.github.io/2022/06/07/unreal-dev/ActorCommunication001.PNG">
<meta property="og:image" content="https://qifeng1994.github.io/2022/06/07/unreal-dev/ActorCommunication002.PNG">
<meta property="og:image" content="https://qifeng1994.github.io/2022/06/07/unreal-dev/ActorCommunication003.PNG">
<meta property="og:image" content="https://qifeng1994.github.io/2022/06/07/unreal-dev/ActorCommunication004.PNG">
<meta property="og:image" content="https://qifeng1994.github.io/2022/06/07/unreal-dev/ActorCommunication005.PNG">
<meta property="og:image" content="https://qifeng1994.github.io/2022/06/07/unreal-dev/ActorCommunication006.PNG">
<meta property="og:image" content="https://qifeng1994.github.io/2022/06/07/unreal-dev/ActorCommunication007.PNG">
<meta property="og:image" content="https://qifeng1994.github.io/2022/06/07/unreal-dev/ActorCommunication008.PNG">
<meta property="og:image" content="https://qifeng1994.github.io/2022/06/07/unreal-dev/ActorCommunication009.PNG">
<meta property="og:image" content="https://qifeng1994.github.io/2022/06/07/unreal-dev/ActorCommunication010.PNG">
<meta property="og:image" content="https://qifeng1994.github.io/2022/06/07/unreal-dev/ActorCommunication011.PNG">
<meta property="og:image" content="https://qifeng1994.github.io/2022/06/07/unreal-dev/ActorCommunication012.PNG">
<meta property="og:image" content="https://qifeng1994.github.io/2022/06/07/unreal-dev/ActorCommunication013.PNG">
<meta property="og:image" content="https://qifeng1994.github.io/2022/06/07/unreal-dev/BSP001.PNG">
<meta property="og:image" content="https://qifeng1994.github.io/2022/06/07/unreal-dev/BSP002.PNG">
<meta property="og:image" content="https://qifeng1994.github.io/2022/06/07/unreal-dev/Mixamo001.PNG">
<meta property="og:image" content="https://qifeng1994.github.io/2022/06/07/unreal-dev/Mixamo002.jpeg">
<meta property="og:image" content="https://qifeng1994.github.io/2022/06/07/unreal-dev/Mixamo003.jpeg">
<meta property="og:image" content="https://qifeng1994.github.io/2022/06/07/unreal-dev/Mixamo018.PNG">
<meta property="og:image" content="https://qifeng1994.github.io/2022/06/07/unreal-dev/Mixamo019.PNG">
<meta property="og:image" content="https://qifeng1994.github.io/2022/06/07/unreal-dev/Mixamo004.PNG">
<meta property="og:image" content="https://qifeng1994.github.io/2022/06/07/unreal-dev/Mixamo005.PNG">
<meta property="og:image" content="https://qifeng1994.github.io/2022/06/07/unreal-dev/Mixamo006.PNG">
<meta property="og:image" content="https://qifeng1994.github.io/2022/06/07/unreal-dev/Mixamo007.PNG">
<meta property="og:image" content="https://qifeng1994.github.io/2022/06/07/unreal-dev/Mixamo008.PNG">
<meta property="og:image" content="https://qifeng1994.github.io/2022/06/07/unreal-dev/Mixamo009.PNG">
<meta property="og:image" content="https://qifeng1994.github.io/2022/06/07/unreal-dev/Mixamo012.PNG">
<meta property="og:image" content="https://qifeng1994.github.io/2022/06/07/unreal-dev/Mixamo010.PNG">
<meta property="og:image" content="https://qifeng1994.github.io/2022/06/07/unreal-dev/Mixamo011.PNG">
<meta property="og:image" content="https://qifeng1994.github.io/2022/06/07/unreal-dev/Mixamo013.PNG">
<meta property="og:image" content="https://qifeng1994.github.io/2022/06/07/unreal-dev/Mixamo014.PNG">
<meta property="og:image" content="https://qifeng1994.github.io/2022/06/07/unreal-dev/Mixamo015.PNG">
<meta property="og:image" content="https://qifeng1994.github.io/2022/06/07/unreal-dev/Mixamo016.PNG">
<meta property="og:image" content="https://qifeng1994.github.io/2022/06/07/unreal-dev/Mixamo017.PNG">
<meta property="og:image" content="https://qifeng1994.github.io/2022/06/07/unreal-dev/dialog001.PNG">
<meta property="og:image" content="https://qifeng1994.github.io/2022/06/07/unreal-dev/dialog002.PNG">
<meta property="og:image" content="https://qifeng1994.github.io/2022/06/07/unreal-dev/dialog003.PNG">
<meta property="og:image" content="https://qifeng1994.github.io/2022/06/07/unreal-dev/dialog004.PNG">
<meta property="og:image" content="https://qifeng1994.github.io/2022/06/07/unreal-dev/dialog005.PNG">
<meta property="og:image" content="https://qifeng1994.github.io/2022/06/07/unreal-dev/dialog006.PNG">
<meta property="og:image" content="https://qifeng1994.github.io/2022/06/07/unreal-dev/dialog007.PNG">
<meta property="og:image" content="https://qifeng1994.github.io/2022/06/07/unreal-dev/dialog008.PNG">
<meta property="og:image" content="https://qifeng1994.github.io/2022/06/07/unreal-dev/dialog009.PNG">
<meta property="og:image" content="https://qifeng1994.github.io/2022/06/07/unreal-dev/dialog010.PNG">
<meta property="og:image" content="https://qifeng1994.github.io/2022/06/07/unreal-dev/dialog011.PNG">
<meta property="og:image" content="https://qifeng1994.github.io/2022/06/07/unreal-dev/dialog012.PNG">
<meta property="og:image" content="https://qifeng1994.github.io/2022/06/07/unreal-dev/dialog013.PNG">
<meta property="og:image" content="https://qifeng1994.github.io/2022/06/07/unreal-dev/dialog014.PNG">
<meta property="og:image" content="https://qifeng1994.github.io/2022/06/07/unreal-dev/dialog015.PNG">
<meta property="og:image" content="https://qifeng1994.github.io/2022/06/07/unreal-dev/dialog016.PNG">
<meta property="og:image" content="https://qifeng1994.github.io/2022/06/07/unreal-dev/dialog017.PNG">
<meta property="og:image" content="https://qifeng1994.github.io/2022/06/07/unreal-dev/dialog018.PNG">
<meta property="og:image" content="https://qifeng1994.github.io/2022/06/07/unreal-dev/dialog019.PNG">
<meta property="og:image" content="https://qifeng1994.github.io/2022/06/07/unreal-dev/dialog020.PNG">
<meta property="og:image" content="https://qifeng1994.github.io/2022/06/07/unreal-dev/ContentExample001.PNG">
<meta property="article:published_time" content="2022-06-07T10:35:25.000Z">
<meta property="article:modified_time" content="2022-06-09T12:56:23.333Z">
<meta property="article:author" content="Qi Feng">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://qifeng1994.github.io/2022/06/07/unreal-dev/devlog001.PNG">

<link rel="canonical" href="https://qifeng1994.github.io/2022/06/07/unreal-dev/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'en'
  };
</script>

  <title>unreal dev | Hexo</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">Hexo</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-fw fa-home"></i>Home</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-fw fa-th"></i>Categories</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-fw fa-archive"></i>Archives</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://qifeng1994.github.io/2022/06/07/unreal-dev/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Qi Feng">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          unreal dev
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2022-06-07 19:35:25" itemprop="dateCreated datePublished" datetime="2022-06-07T19:35:25+09:00">2022-06-07</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2022-06-09 21:56:23" itemprop="dateModified" datetime="2022-06-09T21:56:23+09:00">2022-06-09</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/unreal/" itemprop="url" rel="index"><span itemprop="name">unreal</span></a>
                </span>
                  , 
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/unreal/blueprint/" itemprop="url" rel="index"><span itemprop="name">blueprint</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <h3 id="我的第一个游戏开发日志"><a href="#我的第一个游戏开发日志" class="headerlink" title="我的第一个游戏开发日志"></a><strong>我的第一个游戏开发日志</strong></h3><h4 id="2022-x2F-04-x2F-04"><a href="#2022-x2F-04-x2F-04" class="headerlink" title="2022&#x2F;04&#x2F;04"></a>2022&#x2F;04&#x2F;04</h4><p>制作第一个关卡：一个房间，包括一个落地窗，床，桌子，卫生间，门，如果可以的话加上一个窗帘</p>
<p>首先复习一下LightingShadow这个快速指南。然后用BSP Brash绘制房间的边界，再加入家具(需要参考油管bsp to mesh的视频)</p>
<h4 id="2022-x2F-04-x2F-06"><a href="#2022-x2F-04-x2F-06" class="headerlink" title="2022&#x2F;04&#x2F;06"></a>2022&#x2F;04&#x2F;06</h4><p>重新建了一个level1，这次直接用mesh来搭房子，门框和窗户框是通过BSP brush来做的，因为需要剔除门的空间。然后把brush生成mesh，再添加材质。</p>
<p>测试遇到的问题</p>
<ol>
<li><p>从brush生成的mesh不受光照影响，也就是说材质没有被反射，玩家视角看到的是黑色的。</p>
<p>需要做的改动如图，光照贴图分辨率参考其他的墙mesh设置为128，光照贴图坐标索引设为1。</p>
<p><img src="/2022/06/07/unreal-dev/devlog001.PNG"> </p>
</li>
<li><p>当前的mesh默认是没有碰撞的，也就是说玩家会穿墙，对于窗户框来说，添加盒体简化碰撞(当前不希望玩家能穿过窗户)，而对于门框来说，可以通过添加凸包碰撞来自动设置，但是精度有限。</p>
<p>通过添加盒体碰撞然后自定义范围来规划碰撞体积。效果如图</p>
<p><img src="/2022/06/07/unreal-dev/devlog002.PNG"></p>
</li>
</ol>
<h4 id="2022-x2F-04-x2F-07"><a href="#2022-x2F-04-x2F-07" class="headerlink" title="2022&#x2F;04&#x2F;07"></a>2022&#x2F;04&#x2F;07</h4><p>今天想做游戏的开头，玩家躺在床上的视角，遇到了问题。</p>
<p>先把玩家放在床上</p>
<p><img src="/2022/06/07/unreal-dev/devlog003.PNG"> </p>
<p>然后简化了床的碰撞盒</p>
<p><img src="/2022/06/07/unreal-dev/devlog004.PNG"> </p>
<p>但是游戏运行的时候，玩家无法躺在床上</p>
<p><img src="/2022/06/07/unreal-dev/devlog005.PNG"> </p>
<p>但是如果勾选胶囊物理效果就可以躺下</p>
<p><img src="/2022/06/07/unreal-dev/devlog006.PNG"> </p>
<p>或者把胶囊碰撞体缩小</p>
<p><img src="/2022/06/07/unreal-dev/devlog007.PNG"> </p>
<p>还有一种我觉得比较好的解决方法是把默认的胶囊缩小，然后再新建一个和人等大的胶囊</p>
<p><img src="/2022/06/07/unreal-dev/devlog008.PNG"> </p>
<p>之所以要重新添加一个胶囊是因为我怀疑原来的胶囊碰撞体根本无法旋转</p>
<p>还有一个原因我觉得是本身这个场景就不应该用character而是应该用pawn</p>
<p>今天还看了官方的<a target="_blank" rel="noopener" href="https://youtu.be/rMolbbWOlEs">第三人称教程</a> 到12P，还有几个设置没太搞懂，先截图记录下来。均取自character蓝图类。</p>
<ol>
<li><p>类默认设置–Pawn–使用控制器旋转Yaw</p>
<p><img src="/2022/06/07/unreal-dev/devlog009.PNG"> </p>
</li>
<li><p>移动组件–角色移动(旋转设置)–使用控制器所需的旋转&#x2F;将旋转朝向运动</p>
<p><img src="/2022/06/07/unreal-dev/devlog010.PNG"></p>
</li>
</ol>
<h4 id="2022-x2F-04-x2F-08"><a href="#2022-x2F-04-x2F-08" class="headerlink" title="2022&#x2F;04&#x2F;08"></a>2022&#x2F;04&#x2F;08</h4><p>明天计划先把第三方教程过一遍，然后找mixamo导入unreal和动画相关的教程，第一场景新建一个pawn类来做。</p>
<p>第三人称游戏的教程没有过完，mixamo导入unreal实现了，但还有缺陷。今天没有做实际的游戏开发。</p>
<h4 id="2022-x2F-04-x2F-09"><a href="#2022-x2F-04-x2F-09" class="headerlink" title="2022&#x2F;04&#x2F;09"></a>2022&#x2F;04&#x2F;09</h4><p>计划看官方骨骼的视频，然后学习蒙皮权重相关的知识。</p>
<h4 id="2022-x2F-04-x2F-10"><a href="#2022-x2F-04-x2F-10" class="headerlink" title="2022&#x2F;04&#x2F;10"></a>2022&#x2F;04&#x2F;10</h4><h4 id="2022-x2F-04-x2F-11"><a href="#2022-x2F-04-x2F-11" class="headerlink" title="2022&#x2F;04&#x2F;11"></a>2022&#x2F;04&#x2F;11</h4><p>游戏内摄像机的切换方法 </p>
<p>案例参考<a target="_blank" rel="noopener" href="https://docs.unrealengine.com/4.27/zh-CN/InteractiveExperiences/UsingCameras/">官方文档</a> ，思路类似actor之间的通信，把Character蓝图的PlayerController组件里的的相机做替换。</p>
<p><img src="/2022/06/07/unreal-dev/Camera002.PNG"> </p>
<h4 id="2022-x2F-04-x2F-12"><a href="#2022-x2F-04-x2F-12" class="headerlink" title="2022&#x2F;04&#x2F;12"></a>2022&#x2F;04&#x2F;12</h4><p>限制摄像机转动角度的方法，关键词 camera rotation limit</p>
<p>油管教程就不贴了，后来看到了一个比较简单的方法</p>
<p><img src="/2022/06/07/unreal-dev/Camera001.PNG"> </p>
<p>虽然不清楚对后续开发是否有影响，反正目前想要达成的目的算是实现了。没想到还有这么简单的方法。</p>
<p>dialog</p>
<hr>
<h3 id="开发过程中的一些技术总结"><a href="#开发过程中的一些技术总结" class="headerlink" title="开发过程中的一些技术总结"></a>开发过程中的一些技术总结</h3><h4 id="关于玩家摄像机镜头的调整"><a href="#关于玩家摄像机镜头的调整" class="headerlink" title="关于玩家摄像机镜头的调整"></a>关于玩家摄像机镜头的调整</h4><ul>
<li>UE4的第一人称模板中，player是由手臂和枪组成的，与相机绑定。</li>
</ul>
<p>在相机的细节中勾选<strong>使用Pawn控制旋转</strong> </p>
<p><img src="/2022/06/07/unreal-dev/FirstPersonCamera001.PNG" alt="FirstPersonCamera001"> <img src="/2022/06/07/unreal-dev/FirstPersonCamera002.PNG" alt="FirstPersonCamera002"></p>
<p>这种相机设置的效果就是相机始终和枪口在一个方向。</p>
<p>但是像吃鸡这样的第一人称游戏中，低头会看到玩家自己的躯干。</p>
<p>为了实现这样的效果，可以修改第三人称模板来实现。</p>
<p>方法参考<a target="_blank" rel="noopener" href="https://youtu.be/zr3pbqmk7LI">油管视频</a> </p>
<ul>
<li>在第三人称的模板中把相机挂在弹簧臂下面，弹簧臂像自拍杆一样与actor保持固定距离。</li>
</ul>
<p>同样在相机的细节中勾选了<strong>使用Pawn控制旋转</strong> 。</p>
<p>相机的修改如下：删除弹簧臂，然后把相机挂载在mesh下面。在插槽中选择head，然后调整相机的transform。可以修改FOV，把相机下移到胸口附近，这样可以在低头时看到手。</p>
<p><img src="/2022/06/07/unreal-dev/ThirdPersonCamera001.PNG"> <img src="/2022/06/07/unreal-dev/ThirdPersonCamera002.PNG"> </p>
<p>然后在相机的设置中勾选<strong>使用Pawn控制旋转</strong>，勾选后表示可以通过鼠标来旋转相机，但是会出现旋转过头的现象，玩家的头是无法旋转360度的。</p>
<p>造成这种问题的原因可以理解为相机在旋转的时候，玩家并没有旋转，如果玩家可以跟着旋转的话，相机的角度就不会过大了。</p>
<p><img src="/2022/06/07/unreal-dev/ThirdPersonCamera004.PNG"> </p>
<p>在最上一层的actor设置中勾选<strong>使用控制器旋转Yaw</strong></p>
<p><img src="/2022/06/07/unreal-dev/ThirdPersonCamera005.PNG"> </p>
<p>最后游戏中低头的效果，目前稍微有点穿模。</p>
<p><img src="/2022/06/07/unreal-dev/ThirdPersonCamera003.PNG"></p>
<hr>
<h4 id="坐标系相关的总结"><a href="#坐标系相关的总结" class="headerlink" title="坐标系相关的总结"></a>坐标系相关的总结</h4><p>直接说结论，坐标系的方向遵循笛卡尔左手坐标系。</p>
<p>首先这是UE4空白项目的世界坐标系 <img src="/2022/06/07/unreal-dev/XYZ001.PNG"> </p>
<blockquote>
<p>在维基百科中，笛卡尔坐标系分为左手和右手两种</p>
</blockquote>
<blockquote>
<p><img src="/2022/06/07/unreal-dev/XYZ002.PNG"><img src="/2022/06/07/unreal-dev/XYZ003.PNG"> </p>
</blockquote>
<p>由图可知UE4是遵循左手坐标系，而XYZ的顺序也是按照自然法则的顺序来命名的。</p>
<p>最后是关于旋转的定义，三个轴的旋转对应飞机的航偏轴，直接上图</p>
<p><img src="/2022/06/07/unreal-dev/XYZ004.PNG"> </p>
<p>唯一需要记忆的是XYZ对应的旋转顺序是Roll Pitch Yaw</p>
<table>
<thead>
<tr>
<th align="center">X</th>
<th align="center">Y</th>
<th align="center">Z</th>
</tr>
</thead>
<tbody><tr>
<td align="center">R</td>
<td align="center">G</td>
<td align="center">B</td>
</tr>
<tr>
<td align="center">大拇指</td>
<td align="center">食指</td>
<td align="center">中指</td>
</tr>
<tr>
<td align="center">Roll</td>
<td align="center">Pitch</td>
<td align="center">Yaw</td>
</tr>
</tbody></table>
<hr>
<h4 id="关于蓝图的迁移"><a href="#关于蓝图的迁移" class="headerlink" title="关于蓝图的迁移"></a>关于蓝图的迁移</h4><p>记录蓝图迁移的方法是因为考虑到以后会经常性的把其他项目的蓝图整合到自己的游戏里面。如果能够顺利迁移的话可以提高开发的效率。</p>
<p>这次迁移的案例是把第三人称模板里的角色蓝图迁移到一个新的空白项目中。</p>
<p><img src="/2022/06/07/unreal-dev/Migrate001.PNG">  这个蓝图的父类是character，蓝图中使用了UE自带的mesh人物，绑定了默认的动画，定义了基本的移动。</p>
<p>从迁移的内容中可以看到相互绑定的关系。(所以在资源迁移的时候并不是单单的把这一个蓝图文件拷贝过去)</p>
<p><img src="/2022/06/07/unreal-dev/Migrate002.PNG"> </p>
<p>可以看到实际迁移的资产包括动画，材质，纹理，男女两个mesh，和最开始介绍的蓝图 (如果迁移的是同名游戏模式，则蓝图的最下面还包括了游戏模式蓝图)</p>
<p>把这些内容迁移到一个新建的空白项目中，需要迁移到content&#x2F; 的目录下</p>
<p>把蓝图拖到游戏场景中发现并不能像第三人称模板一样运行，接下来设置其他的地方</p>
<ul>
<li><p>将拖入场景的ThirdPersonCharacter的pawn改成玩家0，这样游戏开始时默认的视角就不是player start了</p>
</li>
<li><p>新建一个game mode，把默认pawn改成ThirdPersonCharacter</p>
</li>
<li><p>在项目设置–地图和模式–默认游戏模式 改为刚才新建的名字</p>
</li>
<li><p>在项目设置–引擎–输入 中导入第三人称模板的配置文件</p>
<p><img src="/2022/06/07/unreal-dev/Migrate003.PNG"> </p>
<p><img src="/2022/06/07/unreal-dev/Migrate004.PNG"></p>
</li>
</ul>
<p>回到游戏中可以发现角色被完整的移植了过来</p>
<hr>
<h4 id="Actor通信的方法"><a href="#Actor通信的方法" class="headerlink" title="Actor通信的方法"></a>Actor通信的方法</h4><p>**通过蓝图实现Actor通信的方法，参考自 <a target="_blank" rel="noopener" href="https://docs.unrealengine.com/4.27/zh-CN/ProgrammingAndScripting/ActorCommunication/">官方文档</a> **</p>
<p>Actor之间的通信可以理解为玩家按下按键让灯亮或者是玩家靠近一个门，门自动打开。</p>
<ol>
<li><p>直接通信</p>
<p>在玩家蓝图中新建一个公开变量，变量类型是灯的蓝图类，通过直接访问灯的组件来控制的亮灭</p>
<p><img src="/2022/06/07/unreal-dev/ActorCommunication001.PNG"> <img src="/2022/06/07/unreal-dev/ActorCommunication002.PNG"> </p>
<p>这种方法最后需要在游戏场景中的玩家设置中指定lamp reference是谁，这里指定的是一个实例。</p>
<p><img src="/2022/06/07/unreal-dev/ActorCommunication003.PNG"> </p>
</li>
<li><p>类型转换</p>
<p>用cast to来判断是否是目标actor，这个案例中玩家靠近灯后灯会灭，远离后灯会亮。</p>
<p>给玩家添加一个球形碰撞检测，分别在重叠和离开的时候设置灯的亮灭。</p>
<p><img src="/2022/06/07/unreal-dev/ActorCommunication004.PNG"></p>
<p>图中的两个事件是右键Sphere选择的，这种方法相比第一种不需要特殊指定，也就是说在地图里放很多Blueprint Ceiling Light都可以与之互动。</p>
<p><img src="/2022/06/07/unreal-dev/ActorCommunication005.PNG"> </p>
</li>
<li><p>接口</p>
<p>这个案例中，玩家靠近灯时灯灭，远离时灯亮。通过接口实现的好处就是接口可以重用，其他的类也可以使用接口，只不过实现的具体方法不同。</p>
<p>首先新建一个蓝图接口，在接口中定义Turn On和Turn Off两个函数。</p>
<p>玩家与actor重叠时调用接口。</p>
<p><img src="/2022/06/07/unreal-dev/ActorCommunication006.PNG"> </p>
<p>在灯的蓝图中先勾选实现接口 <img src="/2022/06/07/unreal-dev/ActorCommunication007.PNG"> </p>
<p>然后实现接口中的函数</p>
<p><img src="/2022/06/07/unreal-dev/ActorCommunication008.PNG"> </p>
</li>
<li><p>事件分发器</p>
<p>在这个案例中，玩家每当靠近或远离灯时，不仅会让灯亮灭，还会让触发一个爆炸特效。</p>
<p>事件分发可以理解为视频网站更新视频，即</p>
<ol>
<li>创建一个视频频道</li>
<li>有观众订阅这个频道</li>
<li>这个频道发布新视频</li>
<li>订阅了这个频道的观众会受到新视频的通知</li>
</ol>
<p>为了方便把玩家当作是视频频道，而玩家每次与灯触发的事件视作发布一个新的视频，即第一步和第三步</p>
<p><img src="/2022/06/07/unreal-dev/ActorCommunication009.PNG"> </p>
<p>灯和爆炸特效为了订阅这个频道需要创建一个玩家类的公开变量，这里就叫做Subscribe。对应第二步和第四步。</p>
<p><img src="/2022/06/07/unreal-dev/ActorCommunication010.PNG"> </p>
<p><img src="/2022/06/07/unreal-dev/ActorCommunication011.PNG"> </p>
<p><strong>通过C++实现Actor通信</strong></p>
<ol>
<li>直接通信</li>
</ol>
<p>玩家按F键 灯亮</p>
<p>创建Actor类来定义灯，头文件中添加场景组件，点光源组件，静态网格组件，实现灯开关的自定义函数和一些数据成员，然后再构造函数中对这些成员进行定义。—-自此完成了对CeilingLight类的定义</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//CeilingLight.cpp</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">ACeilingLight::TurnOffLight</span><span class="params">()</span> </span>&#123;...&#125; <span class="comment">//开关函数</span></span><br></pre></td></tr></table></figure>



<p>基于这个C++类创建蓝图类，给蓝图类添加mesh素材。然后把蓝图类拖到场景中实例化，完成了从类到对象的过程。</p>
<p>进入玩家类的头文件</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//Character.h</span></span><br><span class="line"><span class="comment">//有什么办法可以按键后让场景中的所有灯都亮灭？？</span></span><br><span class="line"><span class="keyword">protected</span>:</span><br><span class="line">    <span class="built_in">UPROPERTY</span>(EditInstanceOnly, BlueprintReadWrite)</span><br><span class="line">    <span class="keyword">class</span> <span class="title class_">ACeilingLight</span>* CeilingLightToToggle; <span class="comment">//继承类</span></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">ToggleCeilingLight</span><span class="params">()</span></span>; <span class="comment">//开关函数</span></span><br></pre></td></tr></table></figure>

<p>定义成员函数</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//Character.cpp</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">ACharacter::ToggleCeilingLight</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">if</span> (CeilingLightToToggle)</span><br><span class="line">	&#123;</span><br><span class="line">		CeilingLightToToggle-&gt;<span class="built_in">TurnOffLight</span>(); <span class="comment">//通过指向对象的指针来调用函数</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>定义交互方式</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//Character.cpp</span></span><br><span class="line">ACharacter::<span class="built_in">SetupPlayerInputComponent</span>(<span class="keyword">class</span> UInputComponent* PlayerInputComponent)</span><br><span class="line">&#123;</span><br><span class="line">    ...</span><br><span class="line">    PlayerInputComponent-&gt;<span class="built_in">BindAction</span>(<span class="string">&quot;Use&quot;</span>, IE_Pressed, <span class="keyword">this</span>, &amp;ACharacter::ToggleCeilingLight); <span class="comment">//当按键时调用开关函数</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>目前已经在玩家的类中继承了一个灯的类，如果想通过按键实现让灯亮灭还要指定这个灯（对象）是谁</p>
<p><img src="/2022/06/07/unreal-dev/ActorCommunication012.PNG"> </p>
<ol start="2">
<li>类型转换</li>
</ol>
<p>玩家靠近时灯亮，远离时灯灭</p>
<p>灯的设置不变</p>
<p>玩家类中添加用于碰撞检测的球和碰撞事件</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//Character.h 这次不需要继承ceilinglighting类了</span></span><br><span class="line"><span class="keyword">protected</span>:</span><br><span class="line">	<span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">NotifyActorBeginOverlap</span><span class="params">(AActor* OtherActor)</span></span>;</span><br><span class="line">	<span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">NotifyActorEndOverlap</span><span class="params">(AActor* OtherActor)</span></span>;</span><br><span class="line">	<span class="keyword">class</span> <span class="title class_">USphereComponent</span>* SphereComp; <span class="comment">//球体组件</span></span><br></pre></td></tr></table></figure>

<p>实现成员函数</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//Character.cpp</span></span><br><span class="line"><span class="comment">//如果类型转换成功，则直接调用成员函数</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">ACharacter::NotifyActorBeginOverlap</span><span class="params">(AActor* OtherActor)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">if</span> (ACeilingLight* ActorCheck = <span class="built_in">Cast</span>&lt;ACeilingLight&gt;(OtherActor))</span><br><span class="line">	&#123;</span><br><span class="line">		ActorCheck-&gt;<span class="built_in">TurnOffLight</span>();</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">ACharacter::NotifyActorEndOverlap</span><span class="params">(AActor* OtherActor)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">if</span> (ACeilingLight* ActorCheck = <span class="built_in">Cast</span>&lt;ACeilingLight&gt;(OtherActor))</span><br><span class="line">	&#123;</span><br><span class="line">		ActorCheck-&gt;<span class="built_in">TurnOffLight</span>();</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>可以看到这个案例中，类型转换比直接通信相比，首先玩家类不需要去继承灯的类了，因此也不需要去指定游戏场景中的灯对象。其次是可以在游戏场景中放置多个灯，都可以触发亮灭的逻辑。</p>
<ol start="3">
<li>接口</li>
</ol>
<p>初始化接口</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//InteractInterface.h</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="built_in">UFUNCTION</span>()</span><br><span class="line">		<span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">OnInteract</span><span class="params">()</span> </span>= <span class="number">0</span>; <span class="comment">//纯虚函数</span></span><br></pre></td></tr></table></figure>

<p>在灯的头文件中声明接口</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//CeilingLight.h</span></span><br><span class="line"><span class="built_in">UCLASS</span>()</span><br><span class="line">    <span class="keyword">class</span> <span class="title class_">ProjectName_API</span> ACeilingLight : <span class="keyword">public</span> AActor, <span class="keyword">public</span> IInteractInterface <span class="comment">//多重继承</span></span><br><span class="line">    &#123;</span><br><span class="line">     <span class="keyword">public</span>:</span><br><span class="line">        <span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">OnInteract</span><span class="params">()</span></span>;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<p>实现接口</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//CeilingLight.cpp</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">ACeilingLight::OnInteract</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">TurnOffLight</span>(); <span class="comment">//这个函数跟之前介绍的一样</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>在玩家类中调用接口</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//Character.cpp</span></span><br><span class="line"><span class="comment">//如果碰撞体实现了接口，那么调用它的接口的函数</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">ACharacter::NotifyActorBeginOverlap</span><span class="params">(AActor* OtherActor)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">if</span> (IInteractInterface* ActorCheck = <span class="built_in">Cast</span>&lt;IInteractInterface&gt;(OtherActor))</span><br><span class="line">	&#123;</span><br><span class="line">		ActorCheck-&gt;<span class="built_in">OnInteract</span>();</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">ACharacter::NotifyActorEndOverlap</span><span class="params">(AActor* OtherActor)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">if</span> (IInteractInterface* ActorCheck = <span class="built_in">Cast</span>&lt;IInteractInterface&gt;(OtherActor))</span><br><span class="line">	&#123;</span><br><span class="line">		ActorCheck-&gt;<span class="built_in">OnInteract</span>();</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="4">
<li>事件分发器 (运行游戏时会崩溃，编译没有问题)</li>
</ol>
<p>假如玩家触发了A事件，那么绑定过A事件的actor会调用自己的函数。可以把A事件独立出来作为一个actor类，因此玩家不需要主动进行碰撞检测。</p>
<p>玩家类还原为默认，不需要做修改。</p>
<p>创建一个盒体类用于声明委托</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//EventActor.h</span></span><br><span class="line"><span class="built_in">DECLARE_DELEGATE</span>(FOnBossDiedDelegate);</span><br><span class="line">...</span><br><span class="line"><span class="built_in">UPROPERTY</span>(EditInstanceOnly, BlueprintReadWrite)</span><br><span class="line">    <span class="keyword">class</span> <span class="title class_">UBoxComponent</span>* BoxComp; <span class="comment">//盒体组件</span></span><br><span class="line"><span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">NotifyActorBeginOverlap</span><span class="params">(AActor* OtherActor)</span></span>; <span class="comment">//用于碰撞检测</span></span><br><span class="line">FOnBossDiedDelegate OnBossDied; <span class="comment">//这种写法好像类和对象</span></span><br><span class="line"><span class="built_in">UFUNCTION</span>()</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">HandleBossDiedEvent</span><span class="params">()</span></span>; <span class="comment">//</span></span><br></pre></td></tr></table></figure>

<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//EventActor.cpp</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">AEventActor::NotifyActorBeginOverlap</span><span class="params">(AActor* OtherActor)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="built_in">HandleBossDiedEvent</span>(); <span class="comment">//当有actor碰到盒体时，调用事件</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">AEventActor::HandleBossDiedEvent</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	OnBossDied.<span class="built_in">ExecuteIfBound</span>(); <span class="comment">//这个事件激活了委托，那么绑定了OnBossDied的类都会有所反应！</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>灯的类中添加对委托的引用</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//CeilingLight.h</span></span><br><span class="line"><span class="built_in">UPROPERTY</span>(EditInstanceOnly, BlueprintReadWrite)</span><br><span class="line">    <span class="keyword">class</span> <span class="title class_">AEventActor</span>* EventActorReference;</span><br></pre></td></tr></table></figure>

<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//CeilingLight.cpp 这句话会造成程序崩溃</span></span><br><span class="line">EventActorReference-&gt;OnBossDied.<span class="built_in">BindUObject</span>(<span class="keyword">this</span>, &amp;ACeilingLight::TurnOffLight); <span class="comment">//灯的开关函数绑定OnBossDied</span></span><br></pre></td></tr></table></figure>

<p><strong>在关卡蓝图种实现actor通信</strong></p>
<ol>
<li>案例：玩家靠近碰撞盒后灯亮</li>
</ol>
<p><img src="/2022/06/07/unreal-dev/ActorCommunication013.PNG"> </p>
<ol start="2">
<li></li>
</ol>
</li>
</ol>
<hr>
<h4 id="制作UE插件的方法"><a href="#制作UE插件的方法" class="headerlink" title="制作UE插件的方法"></a>制作UE插件的方法</h4><hr>
<h4 id="使用BSP-Brush的心得"><a href="#使用BSP-Brush的心得" class="headerlink" title="使用BSP Brush的心得"></a>使用BSP Brush的心得</h4><p>首先关于Brush是干什么的？</p>
<p><img src="/2022/06/07/unreal-dev/BSP001.PNG"> </p>
<p>上图是从BSP生成的mesh，从左到右依次是默认的cube，将笔刷的长度缩小一倍，将Transform缩小一倍而生成的，但是在引用相同的材质时可以看到，通过Transform缩小一倍的mesh材质也被压缩了。</p>
<p><img src="/2022/06/07/unreal-dev/BSP002.PNG"> </p>
<p>而把mesh做替换后，生成的大小是一样的。也就是说mesh是不受影响的。</p>
<p>由此可以联想到在做建筑物的建模时，</p>
<p>如果首先通过放大笔刷来构图(全部基于1立方的cube)，那么接下来在同位置替换mesh的时候与构图定义的尺寸没有直接关系</p>
<p>如果想直接使用BSP的话，例如地板，只给一面上材质：</p>
<p><strong>所以理想的工作流程应该是先用BSP做基础建模，但是定好了模型的尺寸，然后在根据限定的尺寸去做具体的模型</strong></p>
<hr>
<h4 id="动画系统学习笔记"><a href="#动画系统学习笔记" class="headerlink" title="动画系统学习笔记"></a>动画系统学习笔记</h4><p>2022&#x2F;04&#x2F;08 直接学习过动画混合和序列相关的知识，后来发现好像动画系统是一个很大的分支。所以准备先过一下，如果有可以上手的案例顺便做一做。</p>
<p>主要看的是 <a target="_blank" rel="noopener" href="https://docs.unrealengine.com/4.27/zh-CN/AnimatingObjects/SkeletalMeshAnimation/">骨架网格体动画系统</a> </p>
<p><a target="_blank" rel="noopener" href="https://docs.unrealengine.com/4.27/zh-CN/AnimatingObjects/SkeletalMeshAnimation/CharacterSetupOverview/">角色设置</a> 的流程是</p>
<ol>
<li>找到合适的骨架网格体和对应的动画</li>
<li>导入FBX模型，如果不匹配现有的骨骼，则生成一个新的骨骼。</li>
<li>创建玩家控制器脚本或蓝图来处理来自玩家的输入</li>
<li>为角色或Pawn创建一个蓝图或脚本或蓝图来解析输入并控制角色的实际移动（不是骨架动画）</li>
<li>为角色构造动画蓝图</li>
<li>创建一个使用自定义玩家控制器和任何其他自定义脚本资产的游戏模式脚本或蓝图</li>
</ol>
<hr>
<h4 id="Mixamo上的资源如何用到UE4里面"><a href="#Mixamo上的资源如何用到UE4里面" class="headerlink" title="Mixamo上的资源如何用到UE4里面"></a>Mixamo上的资源如何用到UE4里面</h4><p>Mixamo上主要有两种资源，character和animation</p>
<p>目标是让Mixamo上的character能替换到第三人称模板的小白人上去，然后给他添加动画(这个动画最好是能兼容Mixamo上的动画和EPIC商城的动画)</p>
<ol>
<li><p>直接把character (FBX)导入UE项目中，如果在导入选项中指定UE默认的骨骼，后面可能会有问题，如果不指定的话会自己生成一个新的骨骼。FBX会被拆分，主要是图中的四大项</p>
<p><img src="/2022/06/07/unreal-dev/Mixamo001.PNG"> </p>
<p>这样虽然可以成功导入，但是如果想继续给添加动画的话，感觉无法和UE默认的资源兼容，因此还需要继续从Mixamo上下载相匹配的动画。我觉得这样有可能会无法和虚幻商城的动画包相匹配。</p>
</li>
<li><p>直接把animation导入UE项目中，这样做的初衷是想给UE添加新的动画，我在网上发现了一个转换工具 <a target="_blank" rel="noopener" href="https://terribilisstudio.fr/?section=products">Mixamo Converter</a> ，这个软件的原理是预先准备了一个能和Mixamo上的character相匹配的UE模型，然后传上去，再下载想要的animation，然后把animation在软件中转化一下就可以顺利导入到UE中，导入后的动画用的是还是原来小白人的骨骼和mesh。</p>
<p><strong>这种方法适合给小白人添加新的动画</strong> </p>
</li>
<li><p>利用 <a target="_blank" rel="noopener" href="https://youtu.be/92rag3qStI4">骨骼重定向</a> 的方法，可以实现1：把新的角色和动画导入 2：把新的动画匹配到UE的小人上。</p>
<p>重定向的具体设置：</p>
<p><img src="/2022/06/07/unreal-dev/Mixamo002.jpeg"> </p>
<p><img src="/2022/06/07/unreal-dev/Mixamo003.jpeg"></p>
<p> 导入后角色的头发不能正常显示，修改材质</p>
<p><img src="/2022/06/07/unreal-dev/Mixamo018.PNG"> </p>
<p><img src="/2022/06/07/unreal-dev/Mixamo019.PNG"></p>
</li>
</ol>
<h4 id="总结一下目前用到的几个角色资源包"><a href="#总结一下目前用到的几个角色资源包" class="headerlink" title="总结一下目前用到的几个角色资源包"></a>总结一下目前用到的几个角色资源包</h4><ol>
<li><p>AnimStarterPack 官方的动画包</p>
<p><img src="/2022/06/07/unreal-dev/Mixamo004.PNG"></p>
</li>
</ol>
<p>​	导入后包括动画和mesh和骨骼，mesh和骨骼跟默认的小白人一样，但是如果想把动画添加到第三人称模板上，不能直接引用，可以通过先导出FBX再导入，导入的时候绑定到第三人称模板的骨骼上就可以使用了。</p>
<ol start="2">
<li><p>Scanned3DPeoplePack 商店免费资源</p>
<p><img src="/2022/06/07/unreal-dev/Mixamo005.PNG"> </p>
<p>实际能操控的mesh有6个，骨骼跟小白人一样，但是想把现成的mesh替换掉模板的小白人实现小白人的移动动画是不行的，因为绑定的骨骼路径不同。因此需要更改绑定。</p>
<p><img src="/2022/06/07/unreal-dev/Mixamo006.PNG"> 以这个mesh为例，右键，骨骼–指定骨骼，然后选择模板的骨骼</p>
<p><img src="/2022/06/07/unreal-dev/Mixamo007.PNG"> </p>
<p>可以看到正因为mesh的骨骼是一样的，所以可以直接替换绑定</p>
<p>来到ThirdPersonCharacter蓝图，替换mesh</p>
<p><img src="/2022/06/07/unreal-dev/Mixamo008.PNG">  <img src="/2022/06/07/unreal-dev/Mixamo009.PNG"> </p>
<p>可以看到替换完的mesh还可以使用模板的动画，算是完美兼容。而没有绑定新骨骼的男性mesh只能显示出T型模型，并不会使用动画。</p>
</li>
<li><p>BattleWizardPolyart 商城免费资源</p>
<p><img src="/2022/06/07/unreal-dev/Mixamo012.PNG"> </p>
<p>骨骼与默认的小白人相比有拓展。</p>
<p>如果想把套在小白人上，方法同2，但是需要注意</p>
<p><img src="/2022/06/07/unreal-dev/Mixamo010.PNG"> </p>
<p><img src="/2022/06/07/unreal-dev/Mixamo011.PNG"> </p>
<p>然后如果还想把小魔法师的动画也移植过去，可以先做骨骼重定向，</p>
<p>例如 <img src="/2022/06/07/unreal-dev/Mixamo013.PNG"> <img src="/2022/06/07/unreal-dev/Mixamo014.PNG"> 从缩略图可以看到腿部是 <strong>有问题的</strong> </p>
<p>实际在游戏中的表现，右腿出现了偏移。</p>
<p><img src="/2022/06/07/unreal-dev/Mixamo015.PNG"> </p>
<p>这里的解决方法应该需要用到 <a target="_blank" rel="noopener" href="https://docs.unrealengine.com/4.27/zh-CN/AnimatingObjects/SkeletalMeshAnimation/AnimationRetargeting/">动画重定位</a> (为了把动画重定位，其实修改的是骨骼树)</p>
<p>在这个例子中我主要修改了 <img src="/2022/06/07/unreal-dev/Mixamo016.PNG"> </p>
<p>这里其实是把第三人称模板的默认骨骼设置修改了</p>
<p><strong>实际游戏中比之前下降了一点，但不够完美</strong></p>
<p><img src="/2022/06/07/unreal-dev/Mixamo017.PNG"> </p>
<p>这部分的讲解视频可以参考<a target="_blank" rel="noopener" href="https://youtu.be/JkcJ5bjGPsg">官方油管</a> </p>
</li>
<li><p>Mixamo 重头戏来了</p>
<p>首先要明确Mixamo上的骨骼和Mannequin是不一样的，也就是说不能像之前的三个例子一样直接把模型移植过去。</p>
<p>这个时候需要用到 <a href="#Mixamo%E4%B8%8A%E7%9A%84%E8%B5%84%E6%BA%90%E5%A6%82%E4%BD%95%E7%94%A8%E5%88%B0UE4%E9%87%8C%E9%9D%A2">骨骼重定向</a> </p>
<p>重定向设置完后可以对动画进行双向导入。也就是说前面三个案例中的动画，可以通过 重定向动画资产 生成新的拷贝给Mixamo模型去用，或者是把Mixamo上的各种动画拿给能兼容Mannequin骨骼的模型去用(这就是之前介绍过的一个convert软件)</p>
<p>关于骨骼重定向的讲解视频可以参考<a target="_blank" rel="noopener" href="https://youtu.be/xy9aLbZLdeA">官方油管</a> 和 <a target="_blank" rel="noopener" href="https://youtu.be/92rag3qStI4">Smart Poly</a> 的视频</p>
</li>
</ol>
<hr>
<h4 id="对话系统"><a href="#对话系统" class="headerlink" title="对话系统"></a>对话系统</h4><p>对话系统参考<a target="_blank" rel="noopener" href="https://youtu.be/xI7WHD5C-ps">油管教程</a> 目前先粗略梳理一下开发流程，后面会添加详细的说明</p>
<p>这个对话系统基于碰撞和按键交互触发。NPC与玩家发生碰撞后按F进入对话，鼠标选择对话选项。</p>
<p>各蓝图类中的Event Dispatchers情况总览</p>
<p><strong>DialogComponent</strong> : 绑定 OnExit事件(DialogWidget)</p>
<p><strong>DialogWidget</strong> : </p>
<p>OnExit分发事件, OnSpeakFinish分发事件, OnReplyFinish分发事件, OnMouseButtonDown(Override)</p>
<p>绑定OnClicked事件(DialogReplyObject)</p>
<p><strong>Speak</strong> : 绑定OnSpeakFinish事件</p>
<p><strong>Reply</strong> : 绑定OnReplyFinish事件 </p>
<p><strong>DialogEntry_BP</strong> : 实现接口UserObjectListEntry</p>
<p><strong>DialogReplyObject</strong> : OnClicked分发事件</p>
<ol start="0">
<li>准备工作：</li>
</ol>
<p>用于交互的接口类 Interaction，实现Interaction接口的组件DialogComponent，玩家添加球型碰撞器InteractionSphere</p>
<p>玩家与NPC碰撞时(将实现了Interaction接口的actor储存到数组中)&#x2F;离开时(移除数组元素)</p>
<p><img src="/2022/06/07/unreal-dev/dialog001.PNG"> </p>
<p><img src="/2022/06/07/unreal-dev/dialog002.PNG"> </p>
<ol>
<li>ThirdPersonCharacter</li>
</ol>
<p>当按下交互按键时，选择与玩家最近的NPC调用Interaction接口的函数OnInteraction()</p>
<p><img src="/2022/06/07/unreal-dev/dialog003.PNG"> </p>
<ol start="2">
<li>DialogComponent</li>
</ol>
<p>响应接口的调用</p>
<p><img src="/2022/06/07/unreal-dev/dialog004.PNG"> </p>
<p>Create Widget, Add to Viewport, Set Input Mode UI Only</p>
<ol start="3">
<li>DialogComponent</li>
</ol>
<p>运行BehaviorTree, Blackboard</p>
<p><img src="/2022/06/07/unreal-dev/dialog005.PNG"> </p>
<ol start="4">
<li>DialogTree</li>
</ol>
<p>Key:DialogWidget(在DialogComponent中赋值), ReplyIndex</p>
<p>序列的第一个任务Speak，代表NPC要说的话</p>
<ol start="5">
<li>Speak</li>
</ol>
<p>执行任务 <img src="/2022/06/07/unreal-dev/dialog006.PNG"> </p>
<p>以text为参数调用Speak事件(DialogWidget)</p>
<p><img src="/2022/06/07/unreal-dev/dialog007.PNG"> </p>
<ol start="6">
<li>DialogWidget</li>
</ol>
<p>显示SpeakBox隐藏ReplyBox</p>
<p><img src="/2022/06/07/unreal-dev/dialog008.PNG"> </p>
<ol start="7">
<li>DialogWidget</li>
</ol>
<p>鼠标按下后从NPC的话切换到玩家的话（SPEAK任务结束，进入下一个REPLY任务）</p>
<p>函数OnMouseButtonDown <img src="/2022/06/07/unreal-dev/dialog009.PNG"> </p>
<ol start="8">
<li>Speak</li>
</ol>
<p>由于Speak绑定了OnSpeakFinish事件， 结束任务，进入行为树序列的下一个任务</p>
<p><img src="/2022/06/07/unreal-dev/dialog010.PNG"> </p>
<ol start="9">
<li>Reply</li>
</ol>
<p>任务开始执行 <img src="/2022/06/07/unreal-dev/dialog011.PNG"> </p>
<p>传递reply text参数调用Reply事件 <img src="/2022/06/07/unreal-dev/dialog012.PNG"> </p>
<ol start="10">
<li>DialogWidget</li>
</ol>
<p>Reply事件把数组元素构建为对象，存入reply的对话列表中</p>
<p><img src="/2022/06/07/unreal-dev/dialog013.PNG"> </p>
<p>显示ReplyBox隐藏SpeakBox</p>
<p><img src="/2022/06/07/unreal-dev/dialog014.PNG"> </p>
<ol start="11">
<li>DialogEntry_BP</li>
</ol>
<p>响应接口的调用，把行为树中的对话内容赋值给当前的widget</p>
<p><img src="/2022/06/07/unreal-dev/dialog015.PNG"> </p>
<ol start="12">
<li>DialogEntry_BP</li>
</ol>
<p>reply被点击后，调用OnClicked事件（DialogReplyObject）</p>
<p><img src="/2022/06/07/unreal-dev/dialog016.PNG"> </p>
<ol start="13">
<li>DialogWidget</li>
</ol>
<p>绑定了Onclicked事件，调用OnReplyFinished事件</p>
<p><img src="/2022/06/07/unreal-dev/dialog017.PNG"> </p>
<ol start="14">
<li>Reply</li>
</ol>
<p>绑定了OnReplyFinish事件，任务结束，根据玩家选择的对话选项进入序列的下一个任务</p>
<p><img src="/2022/06/07/unreal-dev/dialog018.PNG"> </p>
<ol start="15">
<li>Exit</li>
</ol>
<p>这里假设玩家对话选项选择完后，NPC再说一句话 然后触发结束任务</p>
<p><img src="/2022/06/07/unreal-dev/dialog019.PNG"> </p>
<ol start="16">
<li>DialogComponent</li>
</ol>
<p>绑定了OnExit事件，Set Input Mode Game Only, Stop Logic (Behavior Tree), Remove widget from Parent</p>
<p>发现的问题：貌似教程里提到的一段节点没有用到？</p>
<p>DialogWidget <img src="/2022/06/07/unreal-dev/dialog020.PNG"> </p>
<hr>
<h4 id="可能会用到的插件"><a href="#可能会用到的插件" class="headerlink" title="可能会用到的插件"></a>可能会用到的插件</h4><ul>
<li><p>Fade Objects：顾名思义是一个组件，可以改变第三人称游戏中相机和玩家之间的物体的材质实现透明的效果（本体是C++写的，但是感觉上比较简单，应该可以研究一下）</p>
</li>
<li><p>AGR：（好像是一个管理系统，没搞懂有什么用）</p>
</li>
<li><p>Async Loading Screen：应该是在读取下一个level时候用的过场动画插件</p>
</li>
<li><p>Cesium：（不知道是什么东西）</p>
</li>
<li><p>Directional &amp; Planet Gravity：一个改变重力方向的插件</p>
</li>
<li><p>Easy Quests：任务系统，基于蓝图开发的组件（感觉可以研究一下）</p>
</li>
<li><p>GOAP NPC：可以给NPC添加AI逻辑？</p>
</li>
<li><p>Graph Formatter：一个理线的插件</p>
</li>
<li><p>Journeyman’s Minimap：小地图插件</p>
</li>
<li><p>Physical Layout Tool ：可以给mesh附加物理效果(重力)</p>
</li>
<li><p>Prefabricator：把素材规划成一个prefab，然后随机的生成，可以实时生成</p>
</li>
<li><p>Procedural Building Generator：一个用于城市建模的蓝图，提供了一些选项方便快速建模（感觉有机会用到）</p>
</li>
<li><p>ProInstance Tools Plugin：同样是建模插件，特点是批量生成和管理</p>
</li>
<li><p>Root Motion Guide：（动画相关的插件，没搞懂，但是貌似教程很详细）</p>
</li>
<li><p>UI Navigation：一个做游戏菜单的框架（感觉后面会用到）</p>
</li>
<li><p>Weather System：国人做的，不知道会不会用到</p>
</li>
<li><p>Blockout Tools ：提供一些现成的mesh(现在是收费的了)</p>
</li>
<li><p>SuperGrid Starter pack ：这是一个工程文件，里面有提供现成的mesh，方便创建关卡的原型</p>
</li>
</ul>
<p>插件下载后保存在engine&#x2F;marketplace下面。可以看到部分源码？</p>
<hr>
<h4 id="开发中还未解决的问题"><a href="#开发中还未解决的问题" class="headerlink" title="开发中还未解决的问题"></a>开发中还未解决的问题</h4><ul>
<li>按键弹出UI这样的key press event写到哪里比较好？玩家蓝图？关卡蓝图？还是在控件蓝图里写？</li>
</ul>
<hr>
<h3 id="案例研究"><a href="#案例研究" class="headerlink" title="案例研究"></a>案例研究</h3><h4 id="ContentExample"><a href="#ContentExample" class="headerlink" title="ContentExample"></a>ContentExample</h4><p><strong>Geometry</strong></p>
<p>1.2 依次把1 2 3的盒体笔刷排序到最后一项</p>
<p><img src="/2022/06/07/unreal-dev/ContentExample001.PNG"> </p>
<p>1.3 没懂有什么用</p>
<p>1.6 非常巧妙的建模（应该用了大量的sub盒体）</p>
<p><strong>FBX</strong> </p>
<p>1.2 LOD细节层级，一个非常神奇的例子！（镜头拉远后会变更mesh的材质）</p>
<p>1.3 <strong>计算法线（Calculate Normals）</strong>  <strong>导入法线（Import Normals）</strong> 都是什么东西？？</p>
<p>1.7 如何把cube变成骨骼体？再添加变形动画？</p>
<p><strong>Navmesh</strong></p>
<p>1.1 让AI通过导航跨过障碍物，利用simple move to location节点。（如果是pawn类的话貌似不能跨过障碍物，但是可以在导航点之间移动）</p>
<p>1.2 利用导航链接代理NavLinkProxy来实现翻越障碍物（自己做案例的时候不能100%成功）</p>
<p>1.3 （没懂和1.1的区别）</p>
<p><strong>Math</strong></p>
<p>1.2 利用time的sin的abs来作为材质（材质中用到了lerp函数，但是向量的算法没搞懂）</p>
<p>1.3 Frac函数的用法</p>
<p>1.4 </p>
<p>…</p>
<p>2.9 让物体旋转朝向玩家的例子（复现成功）</p>
<p>2.14 向量点积 dot product 就是向量的乘积</p>
<p>2.17 （材质的案例，没看懂）</p>
<p>2.18 向量积（不知道有什么用）</p>
<p>2.20 （材质函数没搞懂）</p>
<p><strong>Animation</strong> </p>
<p>1.3 （尝试做一个用鼠标拖动的滑块）（还没搞懂里面的函数，有没找到的变量名hovered）</p>
<p>（妈的动画部分东西好多）</p>
<p><strong>Blueprints_Overview</strong> </p>
<p>1.4 通过构造函数为蓝图类添加组件（感觉没什么用）</p>
<p>1.5 通过构造函数创建动态材质（三个节点）</p>
<p>1.7 </p>
<p><strong>Blueprints_Advanced</strong> </p>
<p>1.1 在一个区域内随机生成静态网格体（复现成功）</p>
<p>1.2 （也是自动生成，但是没看懂）</p>
<p>1.3 （也是自动生成，但是感觉可以复现出来）</p>
<p>1.4 聚光灯的材质很有朦胧的感觉，说不定可以用来挡镜头</p>
<p>2.1 利用timeline改变球的位置和scale来实现弹球的效果</p>
<p>2.2 摄像机追踪人（跳过）</p>
<p>2.3 接口实现，踩下按钮，让其他物体旋转（复现成功）</p>
<p>2.4 开门关门（<strong>感觉可以复现</strong>）</p>
<p>2.5 父子类蓝图（没看懂）玩家在吃道具的时候有一个吸附过程 （真牛啊）</p>
<p><strong>Blueprint Communication</strong></p>
<p>1.1 最简单的通过自定义事件触发开关灯，这里灯的亮灭经过了一个timeline。按钮在被按下时材质会发生变化</p>
<p>1.2 实际上是三个actor之间的通信，比较有新意的是，灯的亮度通过电池的容量调节。电池类中定义了与按钮的交互和电池的电量，灯类中定义了与电池的交互和亮灭的细节</p>
<p>1.3 </p>
<p>1.4 按钮类通过Get all actors of class 来让一群灯亮，灯类通过set play rate实现随机timeline看起来不同灯有不同的闪烁</p>
<p>2.1 基本的事件分发器，但是<strong>通过关卡蓝图实现的中转</strong> </p>
<p>2.3 炸弹爆炸，要搞懂这个过程的状态转移</p>
<p>3.2 接口三个拉杆的案例</p>
<p><strong>Blueprint_Input</strong></p>
<p>有三个小游戏案例，首先实现了玩家控制器的切换功能 （<strong>虽然还没细看，但是感觉里面的游戏逻辑值得研究</strong>）</p>
<p><strong>Blueprint_HUD</strong></p>
<p>这个吃道具的案例用到了很多功能性类，比如game mode，hud，level bp，controller bp</p>
<p>虽然貌似hud已经比较老了，但是<strong>有时间可以做一个框架梳理</strong></p>
<p><strong>Blueprint_Splines</strong></p>
<p>1.3 不知道有什么用，通过splinemesh组件拉伸一个管道，但是不能像spline组件一样派生多个拐点 （<strong>向量的计算没看懂</strong>）</p>
<p>2.2 动态添加spline，实现了随风摆动的灯笼（<strong>详细没看</strong>）</p>
<p>2.3 树枝生长的动画，用到了很多和spline相关的节点</p>
<p>2.4 模拟鱼的运动（<strong>这个太牛逼了，感觉看会就能出师了</strong>）</p>
<p><strong>Physics</strong></p>
<p>1.1 给mesh勾选movable和simulate physics来添加物理效果（<strong>玩家的抓取系统看起来很复杂</strong> 玩家蓝图中定义了一个grabb函数，和官方教程的案例有相似的地方，不过官方教程把抓取做成了一个组件）</p>
<p>1.2 给骨架mesh添加物理，实现了像人类一败涂地的效果</p>
<p><strong>StaticMesh</strong></p>
<p>1.3 为什么！！UV通道是什么东西</p>
<h4 id><a href="#" class="headerlink" title></a></h4><h3 id="官方文档学习笔记"><a href="#官方文档学习笔记" class="headerlink" title="官方文档学习笔记"></a>官方文档学习笔记</h3><ol>
<li><p><a target="_blank" rel="noopener" href="https://docs.unrealengine.com/4.27/zh-CN/RenderingAndGraphics/Materials/ExpressionReference/">材质节点的说明</a> </p>
</li>
<li><p><a target="_blank" rel="noopener" href="https://docs.unrealengine.com/4.27/zh-CN/InteractiveExperiences/UsingCameras/">关于摄像机使用的例子</a></p>
</li>
</ol>
<p>有CPP的实现方法，还没有看。其中切换摄像机视角用到了 SetViewTargetwithBlend 节点 (target is player controller)</p>

    </div>

    
    
    

      <footer class="post-footer">

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/2021/08/26/hello-world/" rel="prev" title="Hello World">
      <i class="fa fa-chevron-left"></i> Hello World
    </a></div>
      <div class="post-nav-item">
    <a href="/2022/06/07/cpp/" rel="next" title="cpp">
      cpp <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%88%91%E7%9A%84%E7%AC%AC%E4%B8%80%E4%B8%AA%E6%B8%B8%E6%88%8F%E5%BC%80%E5%8F%91%E6%97%A5%E5%BF%97"><span class="nav-number">1.</span> <span class="nav-text">我的第一个游戏开发日志</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#2022-x2F-04-x2F-04"><span class="nav-number">1.1.</span> <span class="nav-text">2022&#x2F;04&#x2F;04</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2022-x2F-04-x2F-06"><span class="nav-number">1.2.</span> <span class="nav-text">2022&#x2F;04&#x2F;06</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2022-x2F-04-x2F-07"><span class="nav-number">1.3.</span> <span class="nav-text">2022&#x2F;04&#x2F;07</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2022-x2F-04-x2F-08"><span class="nav-number">1.4.</span> <span class="nav-text">2022&#x2F;04&#x2F;08</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2022-x2F-04-x2F-09"><span class="nav-number">1.5.</span> <span class="nav-text">2022&#x2F;04&#x2F;09</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2022-x2F-04-x2F-10"><span class="nav-number">1.6.</span> <span class="nav-text">2022&#x2F;04&#x2F;10</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2022-x2F-04-x2F-11"><span class="nav-number">1.7.</span> <span class="nav-text">2022&#x2F;04&#x2F;11</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2022-x2F-04-x2F-12"><span class="nav-number">1.8.</span> <span class="nav-text">2022&#x2F;04&#x2F;12</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%BC%80%E5%8F%91%E8%BF%87%E7%A8%8B%E4%B8%AD%E7%9A%84%E4%B8%80%E4%BA%9B%E6%8A%80%E6%9C%AF%E6%80%BB%E7%BB%93"><span class="nav-number">2.</span> <span class="nav-text">开发过程中的一些技术总结</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%85%B3%E4%BA%8E%E7%8E%A9%E5%AE%B6%E6%91%84%E5%83%8F%E6%9C%BA%E9%95%9C%E5%A4%B4%E7%9A%84%E8%B0%83%E6%95%B4"><span class="nav-number">2.1.</span> <span class="nav-text">关于玩家摄像机镜头的调整</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%9D%90%E6%A0%87%E7%B3%BB%E7%9B%B8%E5%85%B3%E7%9A%84%E6%80%BB%E7%BB%93"><span class="nav-number">2.2.</span> <span class="nav-text">坐标系相关的总结</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%85%B3%E4%BA%8E%E8%93%9D%E5%9B%BE%E7%9A%84%E8%BF%81%E7%A7%BB"><span class="nav-number">2.3.</span> <span class="nav-text">关于蓝图的迁移</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Actor%E9%80%9A%E4%BF%A1%E7%9A%84%E6%96%B9%E6%B3%95"><span class="nav-number">2.4.</span> <span class="nav-text">Actor通信的方法</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%88%B6%E4%BD%9CUE%E6%8F%92%E4%BB%B6%E7%9A%84%E6%96%B9%E6%B3%95"><span class="nav-number">2.5.</span> <span class="nav-text">制作UE插件的方法</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%BD%BF%E7%94%A8BSP-Brush%E7%9A%84%E5%BF%83%E5%BE%97"><span class="nav-number">2.6.</span> <span class="nav-text">使用BSP Brush的心得</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%8A%A8%E7%94%BB%E7%B3%BB%E7%BB%9F%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0"><span class="nav-number">2.7.</span> <span class="nav-text">动画系统学习笔记</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Mixamo%E4%B8%8A%E7%9A%84%E8%B5%84%E6%BA%90%E5%A6%82%E4%BD%95%E7%94%A8%E5%88%B0UE4%E9%87%8C%E9%9D%A2"><span class="nav-number">2.8.</span> <span class="nav-text">Mixamo上的资源如何用到UE4里面</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%80%BB%E7%BB%93%E4%B8%80%E4%B8%8B%E7%9B%AE%E5%89%8D%E7%94%A8%E5%88%B0%E7%9A%84%E5%87%A0%E4%B8%AA%E8%A7%92%E8%89%B2%E8%B5%84%E6%BA%90%E5%8C%85"><span class="nav-number">2.9.</span> <span class="nav-text">总结一下目前用到的几个角色资源包</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%AF%B9%E8%AF%9D%E7%B3%BB%E7%BB%9F"><span class="nav-number">2.10.</span> <span class="nav-text">对话系统</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%8F%AF%E8%83%BD%E4%BC%9A%E7%94%A8%E5%88%B0%E7%9A%84%E6%8F%92%E4%BB%B6"><span class="nav-number">2.11.</span> <span class="nav-text">可能会用到的插件</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%BC%80%E5%8F%91%E4%B8%AD%E8%BF%98%E6%9C%AA%E8%A7%A3%E5%86%B3%E7%9A%84%E9%97%AE%E9%A2%98"><span class="nav-number">2.12.</span> <span class="nav-text">开发中还未解决的问题</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%A1%88%E4%BE%8B%E7%A0%94%E7%A9%B6"><span class="nav-number">3.</span> <span class="nav-text">案例研究</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#ContentExample"><span class="nav-number">3.1.</span> <span class="nav-text">ContentExample</span></a></li><li class="nav-item nav-level-4"><a class="nav-link"><span class="nav-number">3.2.</span> <span class="nav-text"></span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AE%98%E6%96%B9%E6%96%87%E6%A1%A3%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0"><span class="nav-number">4.</span> <span class="nav-text">官方文档学习笔记</span></a></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">Qi Feng</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">20</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
        <span class="site-state-item-count">8</span>
        <span class="site-state-item-name">categories</span>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/qifeng1994" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;qifeng1994" rel="noopener" target="_blank"><i class="fa fa-fw fa-github"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="/maidoufengfeng@gmail.com" title="E-Mail → maidoufengfeng@gmail.com"><i class="fa fa-fw fa-envelope"></i>E-Mail</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://twitter.com/maidoufengfeng" title="Twitter → https:&#x2F;&#x2F;twitter.com&#x2F;maidoufengfeng" rel="noopener" target="_blank"><i class="fa fa-fw fa-twitter"></i>Twitter</a>
      </span>
  </div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Qi Feng</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Gemini</a>
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  

</body>
</html>
